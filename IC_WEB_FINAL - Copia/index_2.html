<!DOCTYPE html>
<html lang="en">

      <head>
            <meta charset="UTF-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <link rel="stylesheet" href="css/style.css" />
            <title>Equipment Status Map</title>

            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
            <link rel="stylesheet" type="text/css" href="styles.css">
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3gcx15wFjqWecZFa0ghbGgWoLyeoFHjI"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

            <meta charset="UTF-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <link rel="stylesheet" href="css/style.css" />
      </head>

      <body>

        <div class="container">
            <div class="logo">

            <?xml version="1.0" encoding="UTF-8" standalone="no"?>
            <svg
              xmlns:dc="http://purl.org/dc/elements/1.1/"
              xmlns:cc="http://creativecommons.org/ns#"
              xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
              xmlns:svg="http://www.w3.org/2000/svg"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 378.82666 116.81333"
              height="86"
              width="180"
              xml:space="preserve"
              id="svg2"
              version="1.1"><metadata
                id="metadata8"><rdf:RDF><cc:Work
                    rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                      rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
                id="defs6" /><g
                transform="matrix(1.3333333,0,0,-1.3333333,0,116.81333)"
                id="g10"><g
                  transform="scale(0.1)"
                  id="g12"><path
                    id="path14"
                    style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="m 1150.39,285.918 v 129.98 h -122.4 v -129.98 h -54.275 l 0.012,298.289 h 54.263 v -116.57 h 122.4 v 116.57 h 54.28 V 285.918 h -54.28" /><path
                    id="path16"
                    style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="m 1261.31,285.918 v 298.289 h 203.58 V 534.973 H 1315.5 v -69.446 h 130.45 V 416.746 H 1315.5 v -81.59 h 149.37 v -49.238 h -203.56" /><path
                    id="path18"
                    style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="m 1684.13,285.918 -66.81,108.516 -66.93,-108.516 h -58.43 l 93.77,151.879 -92.95,146.41 h 59.28 l 66.9,-104.41 64.83,104.41 h 58.9 l -91.72,-146.867 92.91,-151.422 h -59.75" /><path
                    id="path20"
                    style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 1880.48,517.703 1838,391.875 h 84.96 z m 78.69,-231.785 -19.39,57.195 h -118.6 l -19.33,-57.195 h -54.69 l 104.72,298.289 h 59.3 l 104.73,-298.289 h -56.74" /><path
                    id="path22"
                    style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="m 2260.4,285.918 -31.45,32.832 c -8.87,-17.305 -37.44,-37.891 -74.91,-38.309 -34.44,-0.421 -65.19,8.387 -88.78,33.258 -31.06,32.375 -38.68,72.356 -38.68,121.145 0,48.801 6.34,87.476 38.7,119.851 22.74,22.711 56.78,34.985 88.76,34.985 36.63,0 68.15,-13.524 88.35,-34.133 14.75,-15.102 25.65,-34.098 27.35,-60.176 h -55.57 c -0.84,11.82 -6.66,19.738 -13,27.387 -10.5,12.215 -26.9,18.097 -47.51,18.097 -17.28,0 -37.13,-7.601 -48.87,-20.179 -20.55,-21.469 -23.08,-58.52 -23.08,-85.832 0,-27.364 2.93,-65.645 23.51,-87.11 11.84,-12.578 31.16,-18.933 48.44,-18.933 19.3,0 34.46,6.746 44.6,17.273 15.91,16.817 19.32,35.301 19.32,58.067 h -71.11 v 45.031 h 123.7 V 285.918 h -9.77" /><path
                    id="path24"
                    style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="m 2484.74,520.676 c -11.82,12.578 -29.96,19.769 -47.2,19.769 -17.17,0 -35.38,-7.191 -47.1,-19.769 -20.55,-21.469 -21.47,-58.52 -21.47,-85.832 0,-27.364 0.92,-63.965 21.47,-85.41 11.72,-12.657 29.93,-19.778 47.1,-19.778 17.24,0 35.38,7.121 47.2,19.778 20.56,21.445 21.44,58.046 21.44,85.41 0,27.312 -0.88,64.363 -21.44,85.832 z m 38.62,-206.582 c -22.73,-22.727 -53.84,-33.653 -85.82,-33.653 -31.89,0 -63.06,10.926 -85.8,33.653 -32.41,32.422 -37.88,71.961 -37.88,120.75 0,48.801 5.47,88.785 37.88,121.144 22.74,22.719 53.91,33.692 85.8,33.692 31.98,0 63.09,-10.973 85.82,-33.692 32.39,-32.359 37.9,-72.343 37.9,-121.144 0,-48.789 -5.51,-88.328 -37.9,-120.75" /><path
                    id="path26"
                    style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 2785.29,285.918 2656.14,490.785 V 285.918 h -53.43 v 298.289 h 57.6 l 127.47,-201.93 v 201.93 h 53.42 V 285.918 h -55.91" /><path
                    id="path28"
                    style="fill:#8cd4db;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 0,219.063 H 252.887 L 189.656,328.555 Z" /><path
                    id="path30"
                    style="fill:#8cd4db;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 505.805,219.063 758.684,657.09 379.34,438.07 V 219.063 h 126.465" /><path
                    id="path32"
                    style="fill:#9cd750;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 379.34,0 758.695,219.063 H 505.805 Z" /><path
                    id="path34"
                    style="fill:#9cd750;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 189.656,328.555 379.34,438.07 V 876.133 L 126.43,438.07 189.656,328.555" /><path
                    id="path36"
                    style="fill:#9cd750;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 252.887,219.063 379.34,0 v 219.063 z" /><path
                    id="path38"
                    style="fill:#8cd4db;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 0,657.109 V 219.063 L 126.43,438.07 Z" /><path
                    id="path40"
                    style="fill:#3c98be;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 758.684,657.09 505.805,219.063 h 252.89 V 657.09 h -0.011" /><path
                    id="path42"
                    style="fill:#3c98be;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 379.34,438.07 189.656,328.555 252.887,219.063 H 379.34 V 438.07" /><path
                    id="path44"
                    style="fill:#3c98be;fill-opacity:1;fill-rule:nonzero;stroke:none"
                    d="M 379.34,876.133 0,657.109 126.43,438.07 Z" /></g></g></svg>




                  </div>
                  <ul class="link-items">
                    <li class="link-item active">
                      <a href="#" class="link">
                        <ion-icon name="home-outline"></ion-icon>
                        <span style="--i: 1">Home</span>
                      </a>
                    </li>


                    <ul>
                      <li class="link-item dashboard" data-menu="dashboards">
                          <a href="#">
                              <ion-icon name="apps-outline"></ion-icon>
                              <span>Dashboards</span>
                              <ion-icon class="submenu-icon" name="chevron-down-outline"></ion-icon>
                          </a>
                          <ul class="submenu">
                              <li><a href="#">Relatorio Produção</a></li>
                              <li><a href="#">Relatorio Equipamentos</a></li>
                              <li><a href="#">Relatorio Efetividade</a></li>
                          </ul>
                      </li>
                    <!-- Add more items as needed -->
                  </ul>



                    <li class="link-item">
                      <a href="#" class="link"
                        ><ion-icon name="map-outline"></ion-icon>
                        <span style="--i: 3">Mapa</span>
                      </a>
                    </li>

                    
                    <li class="link-item">
                      <a href="#" class="link">
                        <ion-icon class="analytics-outline" name="analytics-outline"></ion-icon>
                        <span style="--i: 4">Fluxo</span>
                      <!--- <span class="num-noti">4</span> --->
                      </a>
                    </li>
                    <li class="link-item">
                      <a href="#" class="link">
                        <ion-icon name="construct-outline"></ion-icon
                        ><span style="--i: 5">Equipamentos</span>
                      </a>
                    </li>
                    <li class="link-item">
                      <a href="#" class="link">
                        <ion-icon name="clipboard-outline"></ion-icon>
                        <span style="--i: 6">Relatorios Devex</span>
                      </a>
                    </li>
                    <li class="link-item">
                      <a href="#" class="link">
                        <ion-icon name="help-circle-outline"></ion-icon>
                        <span style="--i: 7">help</span>
                      </a>
                    </li>


                    <!---
                    <li class="link-item dark-mode">
                      <a href="#" class="link">
                        <ion-icon name="moon-outline"></ion-icon>
                        <span style="--i: 8">dark mode</span>
                      </a>
                    </li> 
                          --->
                  </ul>




                  <script
                  type="module"
                  src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
                  ></script>
                  <script
                  nomodule
                  src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
                  ></script>
                  <script src="js/script.js"></script>


            
        </div>


             

             
            </head>
            <body>
                
                
                <style>
                    /* Reset CSS */
                    * {
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                        font-family: 'Poppins', sans-serif;
                    }
            
                    body {
                        min-height: 100vh;
                        background: var(--bg-clr);
                        display: flex;
                        margin: 0;
                        position: relative;
                    }
            
                    .container {
                        width: 85px;
                        min-height: 500px;
                        padding: 20px;
                        overflow: hidden;
                        border-radius: 10px;
                        background-color: var(--white-bg);
                        transition: width 0.3s ease;
                        position: fixed;
                        top: 0;
                        left: 0;
                        height: 100vh;
                        z-index: 1000;
                    }
            
                    .container.active {
                        width: 250px;
                    }
            
                    .dashboard-container {
                        margin-left: 85px; /* Space for the menu */
                        padding: 20px;
                        width: calc(100% - 85px); /* Adjust width to fit content */
                    }
            
                    .chart-row {
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 20px;
                    }
            
                    .chart-container {
                        flex: 1;
                        padding: 10px;
                        background-color: #f8f9fa;
                        border: 1px solid #dee2e6;
                        border-radius: 4px;
                        margin-right: 20px;
                        min-height: 250px;
                        box-sizing: border-box;
                    }
            
                    .chart-container:last-child {
                        margin-right: 0;
                    }
            
                    .chart-title {
                        font-weight: bold;
                        text-align: center;
                        margin-bottom: 10px;
                    }
            
                    .chart {
                        width: 100%;
                        height: 200px;
                        background-color: #e9ecef;
                        border-radius: 4px;
                    }
            
                    .chart-container.half-width {
                        flex: 0.48;
                    }
            
                    .chart-container.full-width {
                        flex: 1;
                        margin-right: 0;
                    }
                </style>
            
            
                
            
            
            
            
            
            
            
            
            
                
            
                <!-- Dashboard Layout -->
                <div class="dashboard-container">
                    <!-- First row of charts -->
                    <div class="chart-row">
                        <div class="chart-container">
                            <div class="chart-title">Transporte</div>
                            <div class="chart" id="chart_Transporte"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">Carga</div>
                            <div class="chart" id="chart_Carga"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">Auxiliar</div>
                            <div class="chart" id="chart_Auxiliar"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">Manutenção</div>
                            <div class="chart" id="chart_Manutencao"></div>
                        </div>
                    </div>
            
                    <!-- Second row of charts -->
                    <div class="chart-row">
                        <div class="chart-container">
                            <div class="chart-title">Alocação/Origem</div>
                            <div class="chart" id="chart_AlocacaoOrigem"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">Alocação/Destino</div>
                            <div class="chart" id="chart_AlocacaoDestino"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">Alocação/Máquina</div>
                            <div class="chart" id="chart_AlocacaoMaquina"></div>
                        </div>
                    </div>
            
                    <!-- Third row of charts -->
                    <div class="chart-row">
                        <div class="chart-container">
                            <div class="chart-title">Minério (t)</div>
                            <div class="chart" id="chart_Minerio"></div>
                        </div>
                    </div>
            
                    <!-- Fourth row of charts (Volume and Productivity per Shift) -->
                    <div class="chart-row">
                        <div class="chart-container">
                            <div class="chart-title">Informações Produção Turno - Dia (t)</div>
                            <div class="chart" id="chart_InformacoesTurno"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">Ritmo de Produção Turno - Dia (t)</div>
                            <div class="chart" id="chart_RitmoProducao"></div>
                        </div>
                    </div>
                </div>
            
                <script>
                            // Função para buscar e carregar o XML
                            function loadXML(callback) {
                                fetch('../xml/api_endpoints.xml')  // Substitua pelo caminho correto do seu arquivo XML
                                    .then(response => response.text())
                                    .then(str => (new window.DOMParser()).parseFromString(str, "text/xml"))
                                    .then(data => callback(data))
                                    .catch(error => console.error('Erro ao carregar o XML:', error));
                            }
            
                            // Função para buscar dados e renderizar gráfico
                            function fetchDataAndRenderChart(url, chartId, isAlocacao = false, isTurno = false, series = []) {
                                fetch(url)
                                    .then(response => response.json())
                                    .then(data => {
                                        let categories;
                                        let seriesData;
            
                                        if (isAlocacao) {
                                            categories = data.map(item => item.nM_ENTITY);
                                            seriesData = data.map(item => item.qtd);
                                        } else if (isTurno) {
                                            categories = data.map(item => item.turno);
                                            series.forEach(serie => {
                                                serie.data = data.map(item => item[serie.field]);
                                            });
                                        } else if (chartId === 'chart_Minerio') {
                                            categories = data.map(item => item.nomE_MES);
                                            seriesData = data.map(item => item.volume);
                                        } else {
                                            categories = data.map(item => item.tipo || item.nM_EQT);
                                            seriesData = data.map(item => item.qtd);
                                        }
            
                                        var options = {
                                            chart: {
                                                type: 'bar',
                                                height: 200
                                            },
                                            series: series.length > 0 ? series : [{
                                                name: 'Quantidade',
                                                data: seriesData
                                            }],
                                            xaxis: {
                                                categories: categories
                                            },
                                            dataLabels: {
                                                enabled: true
                                            },
                                            colors: ['#007bff']
                                        };
            
                                        var chart = new ApexCharts(document.querySelector(`#${chartId}`), options);
                                        chart.render();
                                    })
                                    .catch(error => console.error('Erro ao buscar dados:', error));
                            }
            
                            // Função para processar o XML e renderizar os gráficos
                            function processCharts(xml) {
                                const charts = xml.getElementsByTagName('chart');
                                
                                for (let i = 0; i < charts.length; i++) {
                                    const chart = charts[i];
                                    const chartId = chart.getAttribute('id');
                                    const url = chart.getElementsByTagName('url')[0].textContent;
                                    const isAlocacao = chart.getAttribute('isAlocacao') === 'true';
                                    const isTurno = chart.getAttribute('isTurno') === 'true';
            
                                    let series = [];
            
                                    // Se houver séries definidas, adiciona ao array de séries
                                    const seriesElements = chart.getElementsByTagName('series');
                                    for (let j = 0; j < seriesElements.length; j++) {
                                        const serie = seriesElements[j];
                                        series.push({
                                            name: serie.getAttribute('name'),
                                            field: serie.getAttribute('field')
                                        });
                                    }
            
                                    // Buscar dados e renderizar o gráfico
                                    fetchDataAndRenderChart(url, chartId, isAlocacao, isTurno, series);
                                }
                            }
            
                            // Carregar o XML ao iniciar a página e processar os gráficos
                            loadXML(processCharts);
            
                </script>




































      </body>

</html>